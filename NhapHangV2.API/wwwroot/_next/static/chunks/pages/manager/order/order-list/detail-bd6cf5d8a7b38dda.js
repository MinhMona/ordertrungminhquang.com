(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9090],{24194:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/order/order-list/detail",function(){return c(46867)}])},93702:function(a,b,c){"use strict";c.d(b,{B:function(){return d},W:function(){return e}});var d={dasboard:"Trang điều khiển",settings:{system:"Cấu h\xecnh hệ thống",feeTQVN:"Cấu h\xecnh vận chuyển TQVN",feeBuy:"Cấu h\xecnh ph\xed dịch vụ mua h\xe0ng",feePayFor:"Cấu h\xecnh ph\xed thanh to\xe1n hộ",feeUser:"Cấu h\xecnh ph\xed người d\xf9ng",listBank:"Danh s\xe1ch ng\xe2n h\xe0ng",notification:"Cấu h\xecnh th\xf4ng b\xe1o",goodsChecking:"Cấu h\xecnh ph\xed kiểm đếm",wareHouse:"Cấu h\xecnh kho TQ - VN",volume:"Cấu h\xecnh ph\xed thể t\xedch"},staff:{employeeManager:"Quản l\xfd nh\xe2n vi\xean",decentralization:"Quản l\xfd ph\xe2n quyền",infoAccount:"Th\xf4ng tin t\xe0i khoản",commissionManager:"Quản l\xfd hoa hồng",adminManagement:"Quản l\xfd admin"},listCustomer:"Danh s\xe1ch kh\xe1ch h\xe0ng",createNewClient:"Th\xeam mới kh\xe1ch h\xe0ng",oder:{orderMain:"Danh s\xe1ch đơn h\xe0ng",oderBuyFor:"Đơn h\xe0ng mua hộ",oderBuyForOther:"Đơn h\xe0ng mua hộ kh\xe1c",payFor:"Đơn h\xe0ng thanh to\xe1n hộ",detail:" Chi tiết đơn h\xe0ng",payOder:"Thanh to\xe1n đơn h\xe0ng",createdOder:"Tạo đơn h\xe0ng kh\xe1c",detailProduct:"Chi tiết sản phẩm"},handleComplaint:"Xử l\xfd khiếu nại",deposit:{listDeposit:"Danh s\xe1ch k\xfd gửi",statisticalFeeDeposit:"Thống k\xea cước k\xfd gửi",exportDepositRequest:"Xuất kho k\xfd gửi đ\xe3 y\xeau cầu",exportDeposit:"Xuất kho kiện chưa y\xeau cầu",detailRequest:"Chi tiết y\xeau cầu"},checkWarehouseTQ:"Kiểm h\xe0ng kho TQ",checkWarehouseVN:"Kiểm h\xe0ng kho VN",importWarehouseTQ:"Nhập kho TQ",assignPro:"G\xe1n kiện cho kh\xe1ch",export:"Xuất kho",parcelManagement:{packageManagement:"Quản l\xfd bao h\xe0ng",billCodeManager:"Quản l\xfd m\xe3 vận đơn",lostCase:"Danh s\xe1ch kiện thất lạc",floatingCase:"Danh s\xe1ch kiện tr\xf4i nổi",detailPackageManagement:"Quản l\xfd bao h\xe0ng chi tiết"},moneyManagement:{personalRecharge:"quản l\xfd nạp tiền c\xe1 nh\xe2n",historyRechargeVN:"Lịch sử nạp tiền",historyWithdrawVN:"Lịch sử r\xfat tiền",historyRechargeTQ:"Lịch sử nạp tệ",historyWithdrawTQ:"Lịch sử r\xfat tệ",historyTransaction:"Lịch sử giao dịch",payExport:"Thanh to\xe1n xuất kho",detailPayExport:"Chi tiết thanh to\xe1n xuất kho"},statistical:{printPurchaseVoucher:"In phiếu mua hộ",turnover:"Thống k\xea doanh thu",depositMoney:"Thống k\xea tiền nạp",surplus:"Thống k\xea số dư",transaction:"Thống k\xea giao dịch",other:"Thống k\xea đơn h\xe0ng",realMoney:"Thống k\xea tiền mua h\xe0ng",depositRevenue:"Thống k\xea k\xfd gửi",salesRevenue:"Thống k\xea sale",orderRevenue:"Thống k\xea đặt h\xe0ng",profitBuyFor:"Thống k\xea lợi nhuận mua hộ",profitPayFor:"Thống k\xea lợi nhuận mua hộ"},post:{Categories:"Chuy\xean mục b\xe0i viết",listPost:"B\xe0i viết",addCategories:" Th\xeam chuy\xean mục",editCategories:"Chỉnh sửa chuy\xean mục",addPost:"Th\xeam b\xe0i viết",editPost:"Chỉnh sửa b\xe0i viết"},homepageContent:"Cấu h\xecnh trang chủ",detailMenu:"Chi tiết Menu",addMenuChild:"Th\xeam menu con",addMenu:"Th\xeam menu",signIn:"Đăng nhập",register:"Đăng k\xfd",forgotPassword:"Kh\xf4i phục mật khẩu",homePage:"ORDER TRUNG MINH QUANG",notification:"Th\xf4ng b\xe1o"},e={dashboard:"Dashboard",shopping:{shopingBag:"Giỏ h\xe0ng",payment:"Thanh to\xe1n"},buyGroceries:{listOder:"Danh s\xe1ch đơn h\xe0ng",createOderPageTMDT:"Tạo đơn h\xe0ng trang TMĐT Kh\xe1c",listOderTMĐT:"Danh s\xe1ch đơn h\xe0ng"},consignmentShipping:{createOderDeposit:"Tạo đơn h\xe0ng k\xfd gửi",listOderDeposit:"Danh s\xe1ch đơn h\xe0ng k\xfd gửi",statisticalDeposit:"Thống k\xea cước k\xfd gửi"},payFor:{listRequest:"Danh s\xe1ch y\xeau cầu thanh to\xe1n hộ",createRequest:"Tạo y\xeau cầu thanh to\xe1n hộ",detaiPay:"Chi tiết thanh to\xe1n hộ"},financialManagement:{listTransactionVND:" Danh s\xe1ch giao dịch VNĐ",listTransactionTQ:" Danh s\xe1ch giao dịch VNĐ",rechargeVNĐ:"Nạp tiền VNĐ",rechargeTQ:"Nạp tiền TQ",withdrawMoneyVND:"R\xfat tiền VNĐ",withdrawMoneyTQ:"R\xfat tiền TQ"},complain:"Khiếu nại",floating:"Kiện tr\xf4i nổi",createComplain:"Tạo khiếu nại mới",tracking:"Theo d\xf5i vận chuyển",infoUser:"Th\xf4ng tin người d\xf9ng"}},46867:function(a,b,c){"use strict";c.r(b),c.d(b,{"default":function(){return F}});var d=c(28520),e=c.n(d),f=c(85893),g=c(1413),h=c(67294),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},j=c(42135),k=function(a,b){return h.createElement(j.Z,(0,g.Z)((0,g.Z)({},a),{},{ref:b,icon:i}))};k.displayName="CaretRightOutlined";var l=h.forwardRef(k),m=c(54907),n=c(11382),o=c(86010),p=c(11163),q=c(87536),r=c(88767),s=c(48880),t=c(38691),u=c(12023),v=c(93702),w=c(9861),x=c(13431);function y(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function z(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function A(a,b){if(null==a)return{};var c,d,e=B(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function B(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}var C="TabPanel py-4",D=m.Z.Panel,E=function(){var a,b,c,d,g,i=(0,x.CG)(function(a){return a.user}).current;if(!i)return null;var j,k=(0,p.useRouter)().query,u=Number((0,p.useRouter)().query.id),v=function(a){if(Array.isArray(a))return a}(j=h.useState(0))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c}(j,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),B=v[0],E=v[1],F=(0,x.CG)(x.s_),G=null==F?void 0:F.connectionId,H=(0,w.Nj)({userSaleEnabled:!!i,userOrderEnabled:!!i}),I=H.userSale,J=H.userOrder,K=(0,q.cI)({mode:"onBlur"});(0,h.useEffect)(function(){if(G){var a=null;return F.on("change",function(a){(null==a?void 0:a.length)&&a.some(function(a){return a.Id=== +(null==k?void 0:k.id)})&&K.reset(s.CY[0])}),function(){return clearTimeout(a)}}},[G]);var L=(0,r.useQuery)(["order-list",u],function(){return s.CY.getByID(+(null==k?void 0:k.id))},{onSuccess:function(a){var b,c;(null==a?void 0:null===(b=a.Data)|| void 0===b?void 0:b.IsCheckNotiPrice)||(null==a?void 0:null===(c=a.Data)|| void 0===c?void 0:c.OrderType)!==3||t.Amu.warning("Đơn h\xe0ng chưa cập nhật b\xe1o gi\xe1 cho kh\xe1ch!"),K.reset(null==a?void 0:a.Data)},onError:t.Amu.error,retry:!1,enabled:!!+(null==k?void 0:k.id),refetchOnWindowFocus:!1}),M=L.data,N=L.isError,O=L.isLoading,P=L.isFetching,Q=L.refetch,R=(0,r.useMutation)(s.CY.update,{onSuccess:function(){t.Amu.success("Cập nhật đơn h\xe0ng th\xe0nh c\xf4ng"),Q()},onError:function(a){var b,c,d;(0,t.CFj)({title:"Đ\xe3 xảy ra lỗi",message:null===(b=a)|| void 0===b?void 0:null===(c=b.response)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.ResultMessage,type:"error"})}}),S=function(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){y(f,d,e,g,h,"next",a)}function h(a){y(f,d,e,g,h,"throw",a)}g(void 0)})}}(e().mark(function a(b){var c,d,f,g;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!((null==b?void 0:b.AmountDeposit)>(null==b?void 0:b.TotalPriceVND))){a.next=3;break}return t.Amu.error("Số tiền phải cọc kh\xf4ng được lớn hơn tổng tiền đơn"),a.abrupt("return");case 3:return c=b.HistoryOrderChanges,d=b.PayOrderHistories,f=b.Complains,100===(g=A(b,["HistoryOrderChanges","PayOrderHistories","Complains"])).Status&&(g.IsCheckNotiPrice=!1),a.next=7,R.mutateAsync(g);case 7:case"end":return a.stop()}},a)}));return N?(0,f.jsx)(t.HYy,{description:"Kh\xf4ng t\xecm thấy đơn h\xe0ng #".concat(null==k?void 0:k.id)}):(0,f.jsx)(n.Z,{spinning:P,children:(0,f.jsx)(q.RV,function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){z(a,b,c[b])})}return a}({},K,{children:(0,f.jsxs)("div",{className:"xl:grid xl:grid-cols-10 gap-4 h-full w-full",children:[(0,f.jsx)("div",{className:"xl:col-span-2",children:(0,f.jsx)("div",{style:{position:"sticky",top:"80px"},children:(0,f.jsx)(t.dnl,{active:B,handleActive:function(a){return E(a)},handleUpdate:S,data:null==M?void 0:M.Data,loading:P,refetch:Q,RoleID:null==i?void 0:i.UserGroupId})})}),(0,f.jsx)("div",{className:"col-span-8 tableBoxPag !h-fit !pb-0 xl:ml-6",children:(0,f.jsxs)(m.Z,{expandIconPosition:"right",expandIcon:function(a){var b=a.isActive;return(0,f.jsx)(l,{rotate:b?90:0})},defaultActiveKey:["1","2","3","4","5","6","7"],children:[(0,f.jsx)(D,{header:"M\xe3 đơn h\xe0ng (".concat((null==M?void 0:null===(a=M.Data)|| void 0===a?void 0:null===(b=a.MainOrderCodes)|| void 0===b?void 0:b.length)||0,")"),children:(0,f.jsx)("div",{id:"order-code",className:(0,o.Z)(C,0===B&&"","px-4"),children:(0,f.jsx)(t.Z6V,{data:null==M?void 0:M.Data,loading:P,refetch:Q,RoleID:null==i?void 0:i.UserGroupId})})},"1"),(0,f.jsx)(D,{header:"M\xe3 vận đơn (".concat((null==M?void 0:null===(c=M.Data)|| void 0===c?void 0:c.SmallPackages.length)||0,")"),children:(0,f.jsx)("div",{id:"transfer-code-list",className:(0,o.Z)(C,"!p-2 !py-0",1===B&&""),children:(0,f.jsx)(t.NRd,{data:null==M?void 0:M.Data,loading:P,handleUpdate:S,RoleID:null==i?void 0:i.UserGroupId})})},"2"),(0,f.jsx)(D,{header:"Danh s\xe1ch sản phẩm (".concat((null==M?void 0:null===(d=M.Data)|| void 0===d?void 0:null===(g=d.Orders)|| void 0===g?void 0:g.length)||0,")"),children:(0,f.jsx)("div",{id:"product-list",className:(0,o.Z)(C,2===B&&"","!px-2 !py-0"),children:(0,f.jsx)(t.GDN,{data:null==M?void 0:M.Data,loading:P,refetch:Q,RoleID:null==i?void 0:i.UserGroupId})})},"3"),(0,f.jsx)(D,{header:"Chi ph\xed đơn h\xe0ng",children:(0,f.jsxs)("div",{id:"surcharge-list",className:(0,o.Z)(C,"p-2 !pt-0",3===B&&""),children:[(0,f.jsx)(t.jE_,{data:null==M?void 0:M.Data,loading:P,handleUpdate:S,RoleID:null==i?void 0:i.UserGroupId}),(0,f.jsx)(t.o2B,{loading:P,data:null==M?void 0:M.Data,RoleID:null==i?void 0:i.UserGroupId})]})},"4"),(0,f.jsx)(D,{header:"Nh\xe2n vi\xean xử l\xfd",children:(0,f.jsx)("div",{id:"handling-staff",className:(0,o.Z)(C,5===B&&"","px-4 !pt-0"),children:(0,f.jsx)(t.a3,{data:null==M?void 0:M.Data,userSaleCatalogue:I,userOrderCatalogue:J,loading:P,RoleID:null==i?void 0:i.UserGroupId})})},"5"),(0,f.jsx)(D,{header:"Th\xf4ng tin đặt h\xe0ng",children:(0,f.jsx)("div",{id:"order-info",className:(0,o.Z)(C,6===B&&""),children:(0,f.jsx)(t._in,{data:null==M?void 0:M.Data,loading:O})})},"6"),(0,f.jsx)(D,{header:"Lịch sử",children:(0,f.jsx)("div",{id:"history",className:(0,o.Z)(C,7===B&&""),children:(0,f.jsx)(t.gJx,{data:null==M?void 0:M.Data,loading:P})})},"7")]})})]})}))})};E.displayName=v.B.oder.detail,E.breadcrumb=u.m.order.orderList.detail,E.Layout=t.Ar2;var F=E}},function(a){a.O(0,[675,296,3662,7570,7598,6145,9774,2888,179],function(){return a(a.s=24194)}),_N_E=a.O()}])